# ComfyUI: دليل الإعداد الشامل للكورس

مرحباً بك في **دليل الإعداد الشامل لـ ComfyUI**.  
سيقوم دفتر العمل (**Notebook**) في هذا المشروع بتجهيز بيئة عمل كاملة وقوية على **Google Colab**، مع تحميل أحدث النماذج وحل جميع المشاكل الشائعة تلقائيًا.

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/ahmedyahia01/ComfyUI-Colab/blob/main/ComfyUI_Installer.ipynb)

---

## ✨ مميزات الإعداد
هذا المشروع ليس مجرد تثبيت عادي، بل هو **بيئة عمل متكاملة** تم تصميمها بعناية لتكون:

- 📦 **متكاملة**: يتم تحميل أحدث نموذج **Stable Diffusion 3** مع أهم الإضافات (**Custom Nodes**) مثل:
  - `ComfyUI-Manager`
  - `Impact-Pack`
  - والمزيد... كلها تُثبت تلقائيًا.
  
- 💾 **دائمة**: يتم حفظ كل الملفات (ComfyUI، النماذج، المخرجات) مباشرة على **Google Drive** الخاص بك، مما يضمن عدم ضياع عملك بعد إغلاق Colab.

---

## 📋 خطوات التشغيل
1. افتح رابط الـ Notebook من الزر أعلاه.
2. اربط حسابك في Google Drive.
3. شغّل الخلايا بالترتيب وسيتم تجهيز كل شيء تلقائيًا.
4. استمتع باستخدام **ComfyUI** بدون أي قيود.

---

## 📌 ملاحظات هامة
- يفضل تشغيل Colab على وضع **T4 GPU** أو **A100 GPU** لضمان أفضل أداء.
- جميع الملفات ستُحفظ في مجلد `ComfyUI` داخل Google Drive.
- عند إعادة فتح الـ Notebook، فقط شغّل الإعداد من جديد وسيستخدم نفس الملفات المخزنة مسبقًا.

---

💡 **جاهز للانطلاق؟** اضغط على زر **Open In Colab** وابدأ رحلتك مع ComfyUI الآن. * 💪 قوية: الكود مصمم للتعامل مع المشاكل الشائعة، مثل انقطاع التحميل للملفات الكبيرة، بطريقة ذكية ومستقرة.
 * 🖱️ بنقرة واحدة: بعد الإعداد الأولي، يمكنك تشغيل البيئة بالكامل عبر خلية واحدة تقوم تلقائيًا بتنظيف أي مشاكل سابقة وتشغيل الخادم وإنشاء الرابط.
⚠️ متطلبات مسبقة (يجب القيام بها مرة واحدة فقط)
قبل تشغيل أي كود، هناك 4 خطوات إلزامية يجب على كل طالب القيام بها لمرة واحدة فقط:
1. إنشاء حساب Hugging Face
 * إذا لم يكن لديك حساب، اذهب إلى https://huggingface.co وقم بإنشاء حساب جديد. إنه مجاني وسريع.
2. الموافقة على شروط نموذج Stable Diffusion 3
 * بعد تسجيل الدخول، اذهب إلى الرابط التالي:
   https://huggingface.co/stabilityai/stable-diffusion-3-medium
 * ستجد في أعلى الصفحة اتفاقية ترخيص. يجب عليك تحديد المربعات والضغط على زر "Agree and access repository". هذا الإجراء ضروري للسماح لحسابك بتحميل النموذج.
3. إنشاء مفتاح وصول Hugging Face
 * بعد الموافقة على الشروط، اذهب إلى صفحة مفاتيح الوصول في إعدادات حسابك:
   https://huggingface.co/settings/tokens
 * اضغط على "New token"، أعطه أي اسم (مثلاً ComfyUI Colab) واختر صلاحية read، ثم اضغط "Generate a token".
 * انسخ هذا المفتاح (يبدأ بـ hf_...) واحتفظ به. سنحتاجه في الخطوة التالية.
4. إنشاء حساب ومفتاح ngrok (إلزامي وجديد)
 * خدمة ngrok التي نستخدمها لإنشاء الرابط العام لم تعد تعمل بدون حساب.
 * الخطوة أ: اذهب إلى الرابط التالي وقم بإنشاء حساب مجاني (يمكنك استخدام حساب جوجل لتسريع العملية):
   https://dashboard.ngrok.com/signup
 * الخطوة ب: بعد تسجيل الدخول، اذهب إلى صفحة مفتاح المصادقة (Your Authtoken) عبر الرابط التالي:
   https://dashboard.ngrok.com/get-started/your-authtoken
 * انسخ هذا المفتاح واحتفظ به. سنحتاجه في الخطوة التالية.
⚙️ كيفية الاستخدام (خطوات تشغيل الكود)
 * افتح الكود في Colab: اضغط على زر "Open In Colab" في الأعلى.
 * حفظ المفاتيح السرية:
   * في واجهة Colab، اضغط على أيقونة المفتاح (🔑 Secrets) في القائمة اليسرى.
   * أضف السر الأول:
     * في خانة Name، اكتب HF_TOKEN.
     * في خانة Value، الصق مفتاح الوصول الخاص بـ Hugging Face.
   * أضف السر الثاني:
     * اضغط على "Add a new secret" مرة أخرى.
     * في خانة Name، اكتب NGROK_AUTH_TOKEN.
     * في خانة Value، الصق مفتاح المصادقة الخاص بـ ngrok.
   * تأكد من تفعيل كلا المفتاحين لدفتر العمل.
 * تشغيل الخلايا بالترتيب:
   * قم بتشغيل الخلية رقم 1: ستقوم بربط Google Drive والتأكد من إعدادات المفاتيح.
   * قم بتشغيل الخلية رقم 2: ستقوم بتثبيت ComfyUI وتحميل كل النماذج والإضافات. هذه الخلية ستستغرق وقتًا طويلاً جدًا (قد تصل لساعة) في المرة الأولى فقط.
   * قم بتشغيل الخلية رقم 3: ستقوم بتشغيل الخادم وإنشاء رابط عام للوصول إلى واجهة ComfyUI.
🚑 حل المشاكل الشائعة
 * "Cannot connect to GPU backend": هذا يعني أن حصتك المجانية من Colab قد انتهت مؤقتًا. الحل هو الانتظار لمدة 12-24 ساعة أو الترقية إلى Colab Pro.
 * خطأ address already in use عند تشغيل الخلية 3: هذا يعني وجود عملية قديمة عالقة من جلسة سابقة. الحل: لا تقلق، فقط قم بإعادة تشغيل الخلية رقم 3 مرة أخرى. لقد تم تصميمها لتقوم تلقائيًا بإيقاف أي عملية قديمة قبل أن تبدأ من جديد.
 * فشل ngrok أو ظهور خطأ المصادقة: تأكد من أنك قمت بنسخ مفتاح ngrok بشكل صحيح وأضفته إلى الأسرار بالاسم NGROK_AUTH_TOKEN تمامًا.
 * "Missing Models" لـ Workflow آخر: هذا الإعداد يقوم بتثبيت النماذج الأساسية. إذا احتجت نماذج أخرى (Checkpoints, LoRAs, VAEs) في المستقبل، يمكنك استخدام ComfyUI-Manager الذي تم تثبيته تلقائيًا للبحث عنها وتثبيتها بسهولة من داخل الواجهة.
هذا المشروع يهدف إلى توفير تجربة سلسة قدر الإمكان. استمتع بالكورس!
⚙️ كيفية الاستخدام (خطوات تشغيل الكود)
 * افتح الكود في Colab: اضغط على زر "Open In Colab" في الأعلى.
 * حفظ المفاتيح السرية:
   * في واجهة Colab، اضغط على أيقونة المفتاح (🔑 Secrets) في القائمة اليسرى.
   * أضف السر الأول:
     * في خانة Name، اكتب HF_TOKEN.
     * في خانة Value، الصق مفتاح الوصول الخاص بـ Hugging Face.
   * أضف السر الثاني:
     * اضغط على "Add a new secret" مرة أخرى.
     * في خانة Name، اكتب NGROK_AUTH_TOKEN.
     * في خانة Value، الصق مفتاح المصادقة الخاص بـ ngrok.
   * تأكد من تفعيل كلا المفتاحين لدفتر العمل.
 * تشغيل الخلايا بالترتيب:
   * قم بتشغيل الخلية رقم 1: ستقوم بربط Google Drive والتأكد من إعدادات المفاتيح.
   * قم بتشغيل الخلية رقم 2: ستقوم بتثبيت ComfyUI وتحميل كل النماذج والإضافات. هذه الخلية ستستغرق وقتًا طويلاً جدًا (قد تصل لساعة) في المرة الأولى فقط.
   * قم بتشغيل الخلية رقم 3: ستقوم بتشغيل الخادم وإنشاء رابط عام للوصول إلى واجهة ComfyUI.
🚑 حل المشاكل الشائعة
 * "Cannot connect to GPU backend": هذا يعني أن حصتك المجانية من Colab قد انتهت مؤقتًا. الحل هو الانتظار لمدة 12-24 ساعة أو الترقية إلى Colab Pro.
 * خطأ address already in use عند تشغيل الخلية 3: هذا يعني وجود عملية قديمة عالقة من جلسة سابقة. الحل: لا تقلق، فقط قم بإعادة تشغيل الخلية رقم 3 مرة أخرى. لقد تم تصميمها لتقوم تلقائيًا بإيقاف أي عملية قديمة قبل أن تبدأ من جديد.
 * فشل ngrok أو ظهور خطأ المصادقة: تأكد من أنك قمت بنسخ مفتاح ngrok بشكل صحيح وأضفته إلى الأسرار بالاسم NGROK_AUTH_TOKEN تمامًا.
 * "Missing Models" لـ Workflow آخر: هذا الإعداد يقوم بتثبيت النماذج الأساسية. إذا احتجت نماذج أخرى (Checkpoints, LoRAs, VAEs) في المستقبل، يمكنك استخدام ComfyUI-Manager الذي تم تثبيته تلقائيًا للبحث عنها وتثبيتها بسهولة من داخل الواجهة.
هذا المشروع يهدف إلى توفير تجربة سلسة قدر الإمكان. استمتع بالكورس!
